#!/bin/bash

# Package Information
VERSION="0.1.0"
NAME="fast-wireguard"
TINY_NAME="fwg"
FULL_NAME="Fast WireGuard"
LIB_DIR="$(dirname "$(readlink -f "$0")")/../lib"

# Load modules
source "${LIB_DIR}/core.sh"
source "${LIB_DIR}/network.sh"
source "${LIB_DIR}/sys.sh"

show_help() {
    echo "Usage: fwg [-h] [-v] COMMAND"
    echo ""
    echo "fwg (Fast WireGuard) is a tool for setting up your WireGuard VPN on your server quickly."
    echo ""
    echo "Options:"
    echo "  -h, --help          Show this help message and exit."
    echo "  -v, --version       Show the fwg version and exit."
    echo ""
    echo "Commands:"
    echo "  check               WireGuard checking and enable IP forwarding"
    echo "  setup               Start the building pipeline"
    echo "  add                 Add a new user"
    echo "  uninstall           Uninstall fast-wireaurd and restore default settings"
}


do_uninstall() {
    echo ""
}


case "$1" in
    -v|--version)
        echo "fast-wireguard ${VERSION}"
        ;;
    -h|--help)
        show_help
        ;;
    check)
        sys::check_requirements
        network::enable_forwarding
        ;;
    setup)
        shift # Remove the param "setup" and pass the rest to the function
        core::setup "$@"
        ;;
    uninstall)
        network::restore_forwarding
        ;;
    *)
        show_help
        ;;
esac
